<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Programming Project - Image Mosaicing</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f4;
        }
        header {
            background-color: #333;
            color: #fff;
            padding: 1rem;
            text-align: center;
        }
        main {
            margin: 20px;
        }
        h2, h3 {
            color: #333;
        }
        .description, .procedure {
            margin-bottom: 20px;
        }
        .image-gallery {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
        }
        .image-item {
            width: calc(33.333% - 20px); /* 3 images per row */
            margin-bottom: 20px;
        }
        .image-item img {
            width: 100%;
            height: auto;
            border: 1px solid #ddd;
            border-radius: 5px;
            box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.1);
        }
        .image-item-full {
            width: 100%; /* Full-width image */
            margin-bottom: 20px;
        }
        .image-item-full img {
            width: 100%;
            height: auto;
            border: 1px solid #ddd;
            border-radius: 5px;
            box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.1);
        }
        .image-title {
            font-size: 1rem;
            text-align: center;
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <header>
        <h1>Image Mosaicing Project</h1>
        <h3>CS180: Intro to Computer Vision and Computational Photography</h3>
    </header>
    <main>
        <!-- Project Description -->
        <section class="description">
            <h2>Project Description</h2>
            <p>The goal of this project is to explore image warping and mosaicing. We take multiple photographs, align them using homographies, warp them, and blend them into a mosaic. 
            The project introduces concepts of projective transformations and teaches how to compute homographies and use them for image mosaicing.</p>
        </section>

        <!-- Part 1: Shoot the Pictures -->
        <section class="procedure">
            <h2>Shoot the Pictures</h2>
            <p>(Description of the process, leaving space for images)</p>
            <div class="image-gallery">
                <div class="image-item">
                    <div class="image-title">Left Image</div>
                    <img src="media/left.png" alt="Left Image">
                </div>
                <div class="image-item">
                    <div class="image-title">Right Image</div>
                    <img src="media/middle.png" alt="Right Image">
                </div>
            </div>
        </section>

        <!-- Part 2: Recover Homographies -->
        <section class="procedure">
            <h2>Recover Homographies</h2>
            <p>In this step, we compute the homography matrix that aligns one image with the other. The homography is a 3x3 matrix that maps points in one image to corresponding points in another using projective transformation.</p>
            <p>We use point correspondences between the two images to set up a system of linear equations and solve for the homography matrix using Singular Value Decomposition (SVD).</p>
            <div class="image-item">
                    <div class="image-title">Left Image Correspondence Points</div>
                    <img src="media/left_points.png" alt="Left Image">
                </div>
                <div class="image-item">
                    <div class="image-title">Right Image</div>
                    <img src="media/right_points.png" alt="Right Image">
                </div>
        </section>

        <!-- Part 3: Warp the Images -->
        <section class="procedure">
            <h2>Warp the Images</h2>
            <p>With the homography matrix computed, we can now warp the left image to the perspective of the right image. We use forward warping to map each pixel in the left image to the output canvas using the homography.</p>

        </section>

        <!-- Part 5: Blend the Images into a Mosaic -->
        <section class="procedure">
            <h2>Blending and Mosaicing Process</h2>
            <p>In this project, images are blended into a mosaic using <strong>weighted averaging</strong> to ensure smooth transitions in overlapping regions. First, the left image is warped into the perspective of the right image using a homography matrix. To blend them, we create <strong>alpha masks</strong> for both images, indicating valid pixels. These masks are then used to compute <strong>blend masks</strong> that determine the contribution of each image in the overlapping areas.</p>
        
            <p>The <strong>weighted averaging</strong> formula for each image is:</p>
            <pre>
                blend_mask1 = mask1 / (mask1 + mask2 + ϵ), 
                blend_mask2 = mask2 / (mask1 + mask2 + ϵ)
            </pre>
        
            <p>This ensures that pixels are mixed smoothly based on their mask values. In the final step, the pixel values from both images are combined using these blend masks, resulting in a seamless mosaic where edges between the images are blurred and integrated naturally. This avoids harsh transitions and creates a coherent panoramic view.</p>
            <div class="image-item-full">
                <div class="Final Mosaic">Right Image</div>
                <img src="media/final.png" alt="final">
            </div>
        </section>


        <!-- Part 4: Image Rectification -->
        <section class="procedure">
            <h2>Image Rectification</h2>
            <p>Image rectification is the process of transforming an image so that a certain planar surface appears front-facing and rectangular. We achieve this by computing a homography based on known correspondences.
            In this case, we take an image of a building from a perspective. Then I create correspondence points for the 4 corners of the right plane of this building. We will transform this into a front facing, rectangular surface
            and visualize the final result of the image when this is done. In this case, I transformed this into size 100,200 as this seems to be the approximate ratio of that face in the original image.  </p>
            <p>Below is an example of image rectification:</p>
            <div class="image-gallery">
                <div class="image-item">
                    <div class="image-title">Original Image</div>
                    <img src="media/rectify.png" alt="Original Image">
                </div>
                <div class="image-item">
                    <div class="image-title">Rectified Image</div>
                    <img src="media/Warped_building.png" alt="Rectified Image">
                </div>
            </div>
        </section>
    </main>
</body>
</html>

